<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DaTools ‚Äî Image Converter</title>
  <style>
    :root {
      --bg: #f5faff;
      --card: #ffffff;
      --text: #1d3557;
      --muted: #6c7a91;
      --brand: #009dff;
      --brand-2: #00c9ff;
      --ok: #18c964;
      --err: #ff4d6d;
      --radius: 18px;
      --shadow: 0 8px 24px rgba(0,0,0,0.08);
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: "Segoe UI", Roboto, sans-serif;
      background: var(--bg);
      color: var(--text);
    }

    /* Header */
    header {
      background: linear-gradient(90deg, var(--brand), var(--brand-2));
      padding: 16px 24px;
      color: #fff;
      box-shadow: var(--shadow);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    header h1 {
      margin: 0;
      font-size: 20px;
      font-weight: 700;
    }
    header span {
      font-size: 13px;
      opacity: 0.9;
    }

    .container { max-width: 1100px; margin: 30px auto; padding: 0 16px; }

    /* Hero */
    .hero {
      text-align: center;
      padding: 40px 20px;
      background: #fff;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      margin-bottom: 30px;
      position: relative;
      overflow: hidden;
    }
    .hero h2 { margin: 0; font-size: 28px; font-weight: 800; }
    .hero p { margin: 10px 0 0; color: var(--muted); }

    /* Floating blobs background */
    .hero::before, .hero::after {
      content: "";
      position: absolute;
      width: 200px; height: 200px;
      border-radius: 50%;
      background: var(--brand-2);
      opacity: 0.15;
      animation: floaty 6s ease-in-out infinite alternate;
    }
    .hero::before { top: -50px; left: -50px; }
    .hero::after { bottom: -60px; right: -40px; animation-delay: 3s; }
    @keyframes floaty {
      from { transform: translateY(0px); }
      to { transform: translateY(20px); }
    }

    /* Grid */
    .grid {
      display: grid;
      grid-template-columns: 1.1fr .9fr;
      gap: 20px;
    }
    @media (max-width: 900px){ .grid { grid-template-columns: 1fr; } }

    .card {
      background: var(--card);
      border-radius: var(--radius);
      padding: 20px;
      box-shadow: var(--shadow);
      animation: fadeInUp 0.6s ease both;
    }
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Dropzone */
    .drop {
      padding: 24px;
      text-align: center;
      border: 2px dashed #c9e6ff;
      border-radius: var(--radius);
      cursor: pointer;
      transition: 0.3s;
    }
    .drop:hover {
      background: #f0f9ff;
      border-color: var(--brand);
    }
    .drop input { display: none; }
    .drop .icon { font-size: 40px; }

    /* File list */
    .list { margin-top: 16px; }
    .item {
      display: grid;
      grid-template-columns: 60px 1fr auto;
      gap: 10px;
      align-items: center;
      padding: 10px;
      border: 1px solid #eee;
      border-radius: 12px;
      background: #f9fbff;
      margin-bottom: 10px;
      animation: fadeInUp 0.5s ease both;
    }
    .thumb img { max-width: 60px; border-radius: 8px; }
    .name { font-weight: 600; }
    .meta { font-size: 12px; color: var(--muted); }
    .status { font-size: 12px; text-align: right; }
    .badge {
      font-size: 11px;
      padding: 4px 8px;
      border-radius: 999px;
      background: var(--brand-2);
      color: #fff;
    }
    .spin {
      display: inline-block;
      width: 16px; height: 16px;
      border: 2px solid #ddd;
      border-top-color: var(--brand);
      border-radius: 50%;
      animation: spinGlow 1s linear infinite;
    }
    @keyframes spinGlow {
      from { transform: rotate(0); box-shadow: 0 0 5px var(--brand); }
      to { transform: rotate(360deg); box-shadow: 0 0 15px var(--brand-2); }
    }

    /* Controls */
    .controls label { font-size: 12px; font-weight: 600; color: var(--muted); }
    select, input, button {
      width: 100%;
      padding: 10px;
      border-radius: 10px;
      border: 1px solid #ccc;
      margin-top: 6px;
      font-size: 14px;
    }
    .actions { display: flex; gap: 10px; margin-top: 12px; }
    .btn {
      padding: 12px 18px;
      border-radius: 10px;
      border: none;
      font-weight: 700;
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }
    .btn.primary {
      background: linear-gradient(90deg, var(--brand), var(--brand-2));
      color: #fff;
      box-shadow: 0 6px 18px rgba(0,157,255,0.3);
    }
    .btn.primary::after {
      content: "";
      position: absolute;
      top: -100%; left: -50%;
      width: 60%; height: 300%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.6), transparent);
      transform: rotate(25deg);
      animation: shine 2.5s infinite;
    }
    @keyframes shine { to { left: 120%; } }
    .btn.secondary { background: #eee; }

    /* Extra sections */
    .steps, .features {
      margin: 40px 0;
      text-align: center;
    }
    .steps h3, .features h3 { font-size: 22px; margin-bottom: 20px; }
    .step-grid, .feature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 20px;
    }
    .step, .feature {
      background: #fff;
      padding: 20px;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      animation: fadeInUp 0.7s ease both;
    }

    footer {
      margin-top: 40px;
      padding: 20px;
      background: #fff;
      text-align: center;
      font-size: 13px;
      color: var(--muted);
      border-top: 1px solid #eee;
    }
    footer a { color: var(--brand); text-decoration: none; }
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <h1>DaTools</h1>
    <span>Free Online Toolkit for Creators</span>
  </header>

  <div class="container">
    <!-- Hero -->
    <section class="hero">
      <h2>Image Converter</h2>
      <p>Convert images to PNG, JPG, JPEG, or WEBP ‚Äî fast, free, secure.</p>
    </section>

    <!-- Main Tool -->
    <div class="grid">
      <!-- Left -->
      <div class="card">
        <div class="drop" id="dropzone">
          <div class="icon">üì§</div>
          <h3>Drag & Drop or Click to Select</h3>
          <p class="sub">Supports JPG, JPEG, PNG, WEBP, SVG</p>
          <input id="file-input" type="file" accept="image/*,.svg" multiple>
        </div>
        <div class="list" id="file-list"></div>
      </div>

      <!-- Right -->
      <div class="card controls">
        <label>Output Format</label>
        <select id="format">
          <option value="png">PNG</option>
          <option value="jpeg">JPG (.jpg)</option>
          <option value="jpeg-ext">JPEG (.jpeg)</option>
          <option value="webp">WEBP</option>
          <option disabled>AI (Not supported in browser)</option>
        </select>

        <label>Quality (JPG/WEBP)</label>
        <input id="quality" type="range" min="0.4" max="1" step="0.01" value="0.92">
        <div id="quality-label">92%</div>

        <label>Resize (optional)</label>
        <input id="w" type="number" placeholder="Width" min="1">
        <input id="h" type="number" placeholder="Height" min="1">
        <div><input type="checkbox" id="keep-ar" checked> Keep Aspect Ratio</div>

        <label>Background (for JPG/WEBP)</label>
        <input id="bg" type="color" value="#ffffff">

        <div class="actions">
          <button class="btn primary" id="convert">Convert</button>
          <button class="btn secondary" id="clear">Clear</button>
        </div>
        <p style="font-size:12px;color:var(--muted)">All processing is local ‚Äî no uploads.</p>
      </div>
    </div>

    <!-- Steps -->
    <section class="steps">
      <h3>How It Works</h3>
      <div class="step-grid">
        <div class="step">1Ô∏è‚É£ Upload your image</div>
        <div class="step">2Ô∏è‚É£ Choose format & settings</div>
        <div class="step">3Ô∏è‚É£ Download instantly</div>
      </div>
    </section>

    <!-- Features -->
    <section class="features">
      <h3>Why Use This Tool?</h3>
      <div class="feature-grid">
        <div class="feature">‚úÖ Supports PNG, JPG, JPEG, WEBP, SVG</div>
        <div class="feature">‚ö° Super fast ‚Äî runs in your browser</div>
        <div class="feature">üîí 100% Secure ‚Äî no file upload</div>
        <div class="feature">üì± Mobile & desktop friendly</div>
      </div>
    </section>
  </div>

  <!-- Footer -->
  <footer>
    Made with ‚ù§Ô∏è by <a href="https://www.youtube.com/@SyedAfnanSAV" target="_blank">Syed Afnan SAV</a> | Contact: toolplus9@gmail.com
  </footer>

  <script>
    const d = document;
    const drop = d.getElementById('dropzone');
    const fileInput = d.getElementById('file-input');
    const list = d.getElementById('file-list');
    const formatSel = d.getElementById('format');
    const qualityRange = d.getElementById('quality');
    const qualityLabel = d.getElementById('quality-label');
    const btnConvert = d.getElementById('convert');
    const btnClear = d.getElementById('clear');
    const widthInput = d.getElementById('w');
    const heightInput = d.getElementById('h');
    const keepAR = d.getElementById('keep-ar');
    const bgPicker = d.getElementById('bg');

    let items = [];

    qualityRange.addEventListener('input', () => {
      qualityLabel.textContent = Math.round(parseFloat(qualityRange.value)*100) + '%';
    });

    drop.addEventListener('click', () => fileInput.click());
    drop.addEventListener('dragover', e => { e.preventDefault(); drop.style.borderColor = 'var(--brand)'; });
    drop.addEventListener('dragleave', e => { drop.style.borderColor = '#c9e6ff'; });
    drop.addEventListener('drop', e => {
      e.preventDefault();
      addFiles([...e.dataTransfer.files]);
    });
    fileInput.addEventListener('change', e => addFiles([...e.target.files]));

    function addFiles(files){
      const accept = ['image/', 'image/svg+xml'];
      files.forEach(f=>{
        if(!accept.some(a=> f.type.startsWith(a) || (a==='image/svg+xml' && f.type==='image/svg+xml'))){
          toast(`Unsupported: ${f.name}`);
          return;
        }
        const url = URL.createObjectURL(f);
        items.push({file:f, url, img:null});
      });
      renderList();
    }

    function renderList(){
      list.innerHTML = '';
      items.forEach((it, idx)=>{
        const row = d.createElement('div');
        row.className = 'item';
        row.dataset.idx = idx;

        const thumb = d.createElement('div'); thumb.className='thumb';
        const im = d.createElement('img'); im.src = it.url; thumb.appendChild(im);

        const mid = d.createElement('div');
        const name = d.createElement('div'); name.className='name'; name.textContent = it.file.name;
        const meta = d.createElement('div'); meta.className='meta'; meta.textContent = humanFile(it.file.size);
        mid.appendChild(name); mid.appendChild(meta);

        const right = d.createElement('div'); right.className='status';
        right.innerHTML = '<span class="badge">Queued</span>';

        row.appendChild(thumb); row.appendChild(mid); row.appendChild(right);
        list.appendChild(row);
      });
    }

    function updateStatus(idx, html){
      const row = list.querySelector(`.item[data-idx="${idx}"] .status`);
      if(row) row.innerHTML = html;
    }

    function humanFile(n){
      const u=['B','KB','MB','GB']; let i=0; while(n>1024 && i<u.length-1){n/=1024;i++} return `${n.toFixed( (i?1:0) )} ${u[i]}`
    }

    async function fileToImageBitmap(file){
      if(file.type === 'image/svg+xml'){
        const svgText = await file.text();
        const blob = new Blob([svgText], {type:'image/svg+xml'});
        const url = URL.createObjectURL(blob);
        const img = new Image();
        img.src = url;
        await img.decode();
        return await createImageBitmap(img);
      }
      const buff = await file.arrayBuffer();
      return await createImageBitmap(new Blob([buff], {type:file.type}));
    }

    function drawToCanvas(bitmap, targetW, targetH, bg){
      const cnv = d.createElement('canvas');
      cnv.width = targetW; cnv.height = targetH;
      const ctx = cnv.getContext('2d');
      if(bg){ ctx.fillStyle = bg; ctx.fillRect(0,0,cnv.width,cnv.height); }
      ctx.drawImage(bitmap, 0,0, targetW, targetH);
      return cnv;
    }

    btnConvert.addEventListener('click', async ()=>{
      if(items.length===0){ toast('Please select files first'); return; }
      const fmt = formatSel.value;

      for(let i=0;i<items.length;i++){
        const it = items[i];
        updateStatus(i, '<span class="spin"></span>');
        try{
          const bmp = await fileToImageBitmap(it.file);
          let tw = bmp.width, th = bmp.height;
          const W = parseInt(widthInput.value||0,10);
          const H = parseInt(heightInput.value||0,10);
          if(W && !H){ tw = W; th = Math.round( (bmp.height/bmp.width) * W ); }
          if(H && !W){ th = H; tw = Math.round( (bmp.width/bmp.height) * H ); }
          if(W && H){
            if(keepAR.checked){
              const ar = bmp.width/bmp.height;
              if(W/H > ar){ th = H; tw = Math.round(H*ar); } else { tw = W; th = Math.round(W/ar); }
            } else { tw=W; th=H; }
          }
          const needBG = (fmt==='jpeg' || fmt==='jpeg-ext' || fmt==='webp');
          const cnv = drawToCanvas(bmp, tw, th, needBG ? bgPicker.value : null);

          let mime = 'image/png', ext = 'png';
          if(fmt==='jpeg'){ mime='image/jpeg'; ext='jpg'; }
          if(fmt==='jpeg-ext'){ mime='image/jpeg'; ext='jpeg'; }
          if(fmt==='webp'){ mime='image/webp'; ext='webp'; }

          const q = parseFloat(qualityRange.value);
          const blob = await new Promise(res=> cnv.toBlob(res, mime, (mime==='image/png')?undefined:q));
          const a = d.createElement('a');
          a.href = URL.createObjectURL(blob);
          a.download = it.file.name.replace(/\.[^.]+$/, '') + '.'+ext;
          a.click();
          updateStatus(i, '<span class="badge" style="background:var(--ok)">Done</span>');
        }catch(e){
          console.error(e);
          updateStatus(i, '<span class="badge" style="background:var(--err)">Error</span>');
        }
      }
    });

    btnClear.addEventListener('click', ()=>{
      items = [];
      list.innerHTML='';
    });

    function toast(msg){
      alert(msg);
    }
  </script>
</body>
</html>
